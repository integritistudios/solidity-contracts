//
// replace: xxx = pog
// replace: yyy = bsc, matic

sudo timedatectl set-timezone Australia/Brisbane

echo "///"
echo "/// section 0 - allocate new drive"
echo "///"

sudo apt-get update -y
sudo apt-get install --only-upgrade -y linux-aws
sudo reboot

lsblk

// its probably called nvme0n1
sudo mkfs -t xfs /dev/nvme0n1
sudo mkdir /nodeData
sudo mount /dev/nvme0n1 /nodeData

sudo blkid
<<<<<<<< GET UUID

sudo cp /etc/fstab /etc/fstab.orig
sudo pico /etc/fstab
<<<<<<<< ENTER UUID
UUID=UUIDGOESHERE  /nodeData  xfs  defaults,nofail  0  2
sudo reboot

sudo chown ubuntu:ubuntu -R /nodeData
sudo chmod 777 /nodeData

echo "///"
echo "/// section 1 - install geth"
echo "///"

sudo apt-get update
sudo apt-get install unzip build-essential make gzip -y

cd ~
wget https://golang.org/dl/go1.16.3.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.16.3.linux-amd64.tar.gz
git clone https://xxxeh@bitbucket.org/xxxeh/xxx-yyy.git
87hqWY9XGPxgaSzZuRSF
cd ~/xxx-yyy
git checkout xxx-yyy

export PATH=$PATH:/usr/local/go/bin 
rm go.sum
go mod tidy

// BSC
make geth
// MATIC
make bor-all

echo "///"
echo "/// section 4 - start the node"
echo "///"

// finale 

./build/bin/geth --datadir /nodeData/node init genesis.json

sh run.sh
tail -f nohup.out
